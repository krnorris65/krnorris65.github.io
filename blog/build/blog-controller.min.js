/*! krnorris65.github.io 2017-11-15 */

function produceBlog(e){blogEl.innerHTML="";const n=parseInt(Array.from(e.target.classList).find(e=>{if(e.startsWith("page-"))return e}).split("-")[1]);n-1==0?previousEl.style.visibility="hidden":(previousEl.style.visibility="visible",previousEl.className=`page-${n-1}`),n+1>numberOfPages?nextEl.style.visibility="hidden":(nextEl.style.visibility="visible",nextEl.className=`page-${n+1}`);const t=(n-1)*blogsPerPage,l=n*blogsPerPage;storedBlogDatabase.slice(t,l).forEach(function(e){let n="";n+=`\n            \x3c!-- Beginning of Blog Post ${e.title} --\x3e\n            <article id="blog-${e.id}" class="blog">\n            <header>\n            <h2 class="weekNum">${e.title}</h2>\n            <p class="weekDate">${e.week_dates}</p>\n            </header>\n            \n            <section>\n            <h3>Celebrations & Inspirations</h3>\n            <ul>`,e.celebrations.forEach(function(e){n+=`<li>${e}</li>`}),n+="\n            </ul>\n            </section>\n            \n            <section>\n            <h3>Challenges & Hang-Ups</h3>\n            <ul>",e.challenges.forEach(function(e){n+=`<li>${e}</li>`}),n+=`\n            </ul>\n            </section>\n            \n            <footer>\n            <span>Posted by ${e.author} on ${e.published}</time></span>\n            </footer>\n            \x3c!-- End of Blog Post ${e.week_num} --\x3e\n            `,blogEl.innerHTML+=n})}const storedBlogDatabase=JSON.parse(localStorage.getItem("adminDatabase")).blog,totalItems=storedBlogDatabase.length,blogsPerPage=5,numberOfPages=Math.ceil(totalItems/blogsPerPage),paginationEl=document.getElementById("blog-paginator"),blogEl=document.getElementById("blog-posts");let paginationString="<ul>";paginationString+="<a id='previous' href='#'>&lt;</a>";for(let e=0;e<numberOfPages;e++)paginationString+=` <li><a class="blogPage page-${e+1}" href="#">${e+1}</a></li>`;paginationString+=" <a id='next' class='page-2' href='#'>&gt;</a>",paginationString+="</ul>",paginationEl.innerHTML=paginationString;const previousEl=document.getElementById("previous"),nextEl=document.getElementById("next"),blogLinks=document.getElementsByClassName("blogPage");for(let e=0;e<blogLinks.length;e++)blogLinks[e].addEventListener("click",produceBlog,!1);produceBlog({target:{classList:["page-1"]}}),previousEl.addEventListener("click",produceBlog,!1),nextEl.addEventListener("click",produceBlog,!1),document.querySelector("input[name='blogFilter']").addEventListener("keyup",e=>{if(e.target.value.length>=3){const n=e.target.value.toLowerCase(),t=storedBlogDatabase.filter(e=>e.title.toLowerCase().includes(n)||e.celebrations.filter(e=>e.toLowerCase().includes(n)).length||e.challenges.filter(e=>e.toLowerCase().includes(n)).length||e.week_dates.toLowerCase().includes(n));blogEl.innerHTML="",t.forEach(e=>{let n="";n+=`\n                        \x3c!-- Beginning of Blog Post ${e.title} --\x3e\n                        <article id="blog-${e.id}" class="blog">\n                        <header>\n                        <h2 class="weekNum">${e.title}</h2>\n                        <p class="weekDate">${e.week_dates}</p>\n                        </header>\n                        \n                        <section>\n                        <h3>Celebrations & Inspirations</h3>\n                        <ul>`,e.celebrations.forEach(function(e){n+=`<li>${e}</li>`}),n+="\n                        </ul>\n                        </section>\n                        \n                        <section>\n                        <h3>Challenges & Hang-Ups</h3>\n                        <ul>",e.challenges.forEach(function(e){n+=`<li>${e}</li>`}),n+=`\n                        </ul>\n                        </section>\n                        \n                        <footer>\n                        <span>Posted by ${e.author} on ${e.published}</time></span>\n                        </footer>\n                        \x3c!-- End of Blog Post ${e.week_num} --\x3e\n                        `,blogEl.innerHTML+=n})}else produceBlog({target:{classList:["page-1"]}})});