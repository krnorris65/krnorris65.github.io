/*! krnorris65.github.io 2017-11-16 */

const editEl=document.getElementById("blog_editContent"),blogDatabase=JSON.parse(localStorage.getItem("adminDatabase")).blog,editContent=e=>{const t=parseInt(Array.from(e.target.classList).find(e=>{if(e.startsWith("edit_"))return e}).split("_")[1]),n=blogDatabase.filter(e=>t===e.id)[0];console.log(n);const l=document.getElementById("blogList");l.innerHTML="";(e=>{let t="";t+=`\n                \x3c!-- Beginning of Blog Post ${e.title} --\x3e\n                <article id="blog-${e.id}" class="blog" contenteditable="false">\n                <header>\n                <h2 class="weekNum">${e.title}</h2>\n                <p class="weekDate">${e.week_dates}</p>\n                </header>\n                \n                <section>\n                <h3>Celebrations & Inspirations</h3>\n                <ul>`,e.celebrations.forEach(e=>{t+=`<li>${e}</li>`}),t+="\n                </ul>\n                </section>\n                \n                <section>\n                <h3>Challenges & Hang-Ups</h3>\n                <ul>",e.challenges.forEach(e=>{t+=`<li>${e}</li>`}),t+=`\n                </ul>\n                </section>\n                \n                <footer>\n                <span>Posted by ${e.author} on ${e.published}</time></span>\n                </footer>\n                \x3c!-- End of Blog Post ${e.week_num} --\x3e\n                `,l.innerHTML+=t})(n)};if(blogDatabase.length>0){const e=document.createElement("h1"),t=document.createTextNode("Edit an Existing Blog");e.appendChild(t),editEl.appendChild(e),editEl.classList.add("hideContent");const n=document.createElement("ul");n.id="blogList",editEl.appendChild(n);blogDatabase.sort((e,t)=>t.id-e.id).forEach(e=>{const t=document.createElement("li");t.appendChild(document.createTextNode(`${e.title} `));const l=document.createElement("button");l.appendChild(document.createTextNode("Edit")),l.className="edit_"+`${e.id}`,l.addEventListener("click",editContent),t.appendChild(l),n.appendChild(t)})}